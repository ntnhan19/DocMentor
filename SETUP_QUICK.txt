# üéØ SETUP & TEST GUIDE - T√≥m t·∫Øt ng·∫Øn g·ªçn

## 5 PH√öT - KH·ªûI ƒê·ªòNG

### Windows - Auto Start
```bash
double-click RUN_API.bat
```

### Linux/Mac
```bash
chmod +x RUN_API.sh
./RUN_API.sh
```

### Manual
```bash
cd backend
pip install -r requirements.txt
python run.py
```

‚úÖ Server ch·∫°y l√∫c: http://localhost:8000

---

## POSTMAN - IMPORT & TEST

### 1. Import Collection
```
Postman ‚Üí File ‚Üí Import ‚Üí DocMentor_API.postman_collection.json
```

### 2. Create Environment
```
Name: DocMentor Local
base_url: http://localhost:8000
token: (empty - auto-fill after login)
```

### 3. Test Flow
```
1. GET  /health                      ‚Üí Check server
2. POST /auth/register               ‚Üí Create account
3. POST /auth/login                  ‚Üí Get token
4. POST /documents/upload            ‚Üí Upload PDF
5. ‚è≥ Wait 30s
6. GET  /documents/{id}              ‚Üí Check processed=true
7. POST /analysis/summary            ‚Üí T√≥m t·∫Øt
8. POST /analysis/concepts           ‚Üí Kh√°i ni·ªám
9. POST /analysis/quiz               ‚Üí Tr·∫Øc nghi·ªám
10. POST /query/                     ‚Üí H·ªèi c√¢u h·ªèi
```

---

## KEY ENDPOINTS

| Ph∆∞∆°ng th·ª©c | Endpoint | M√¥ t·∫£ |
|-----------|----------|------|
| POST | /auth/register | ƒêƒÉng k√Ω |
| POST | /auth/login | ƒêƒÉng nh·∫≠p |
| POST | /documents/upload | Upload file |
| GET | /documents/ | Danh s√°ch |
| POST | /analysis/summary | T√≥m t·∫Øt |
| POST | /analysis/concepts | Kh√°i ni·ªám |
| POST | /analysis/quiz | Quiz |
| POST | /query/ | Chat (RAG) |
| GET | /query/history | L·ªãch s·ª≠ |

---

## ENVIRONMENT VARIABLES

File `.env` trong `backend/`:

```env
DATABASE_URL=postgresql://postgres:21092004@localhost:5432/DocMentor
SECRET_KEY=your-secret-key
GEMINI_API_KEY=your-gemini-key
PINECONE_API_KEY=your-pinecone-key
PINECONE_INDEX_NAME=docmentor
ENVIRONMENT=development
```

---

## TROUBLESHOOT

| L·ªói | Gi·∫£i ph√°p |
|-----|----------|
| Connection refused | Ch·∫°y `python run.py` |
| 401 Unauthorized | Login l·∫°i, copy token |
| Document not processed | Ch·ªù 30-60s, ki·ªÉm tra logs |
| Gemini Error | Ki·ªÉm tra API key |
| Database Error | Start PostgreSQL |

---

## FILES C·∫¶N BI·∫æT

| File | M·ª•c ƒë√≠ch |
|------|---------|
| `POSTMAN_TESTING_GUIDE.md` | üìñ Chi ti·∫øt API |
| `QUICK_START.md` | ‚ö° H∆∞·ªõng d·∫´n 5 ph√∫t |
| `README_FULL.md` | üìö T√†i li·ªáu ƒë·∫ßy ƒë·ªß |
| `API_REFERENCE.py` | üîç Ch·∫°y ƒë·ªÉ xem reference |
| `DocMentor_API.postman_collection.json` | üìÆ Import v√†o Postman |
| `RUN_API.bat` | üöÄ Start server (Windows) |
| `RUN_API.sh` | üöÄ Start server (Linux/Mac) |

---

## ƒê·∫¶U TI√äN L·∫¶N ƒê·∫¶U

1. **Kh·ªüi ƒë·ªông Server**
   ```bash
   RUN_API.bat  (Windows)
   ```

2. **M·ªü Postman**
   - Import collection
   - T·∫°o environment
   - Set base_url = http://localhost:8000

3. **Test API**
   - Health Check: `GET /health` ‚úÖ
   - Register: `POST /auth/register`
   - Login: `POST /auth/login`
   - Upload: `POST /documents/upload`
   - ...

4. **Xem Response**
   - N·∫øu 200/201 ‚Üí OK ‚úÖ
   - N·∫øu error ‚Üí Xem logs

---

## LINKS NHANH

- **Swagger Docs**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Health**: http://localhost:8000/health
- **Root**: http://localhost:8000/

---

## GEMINI & PINECONE KEYS

C·∫ßn 2 API keys:

### Gemini
1. Go: https://ai.google.dev/
2. Click: Get API Key
3. Copy & paste v√†o `.env`

### Pinecone
1. Go: https://pinecone.io/
2. Sign up (free)
3. Create index: "docmentor" (768 dimensions)
4. Copy key ‚Üí `.env`

---

## QUICK TEST BODIES

### Login
```json
{"email": "test@example.com", "password": "Test123!@"}
```

### Query
```json
{
  "query_text": "T√†i li·ªáu n√†y n√≥i v·ªÅ c√°i g√¨?",
  "document_ids": [1],
  "max_results": 5
}
```

### Summary
```json
{"document_id": 1, "length": "medium"}
```

### Quiz
```json
{"document_id": 1, "num_questions": 5, "difficulty": "medium"}
```

---

## CHECKLIST

- [ ] Server ch·∫°y (http://localhost:8000/health)
- [ ] Postman import xong
- [ ] Environment created
- [ ] .env c√≥ API keys
- [ ] Database connected
- [ ] Register user
- [ ] Login & copy token
- [ ] Upload document
- [ ] Wait processing
- [ ] Test analysis
- [ ] Test RAG query

---

‚úÖ **READY!** M·ªü Postman & b·∫Øt ƒë·∫ßu test üöÄ
